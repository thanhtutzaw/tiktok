import Head from "next/head";
import Image from "next/image";
import { MouseEvent, useEffect, useState } from "react";
import styles from "../styles/Home.module.css";
// import video from '../public/1.mp4'


const Video = ({ isplaying , src}:any) => {
  return (
    <div className={styles.videoContainer}>
      {isplaying ? null : (
        <div className={styles.playState}>
          <span>
            <img
              className={styles.playIcon}
              src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAAxElEQVRIie3WMWpCURBG4Q8FSRrtbC2SPhvICmzchVuwtXQLbsE2pVUIkjqQHVgqNmIj6EvxGHhFQAIvcxt/OPVhhrlzh3sKZ4MvTLLFVYNPvJYQB294LiGucMYSw2xxcMQcj9niYIsputni4BvjEuJgjZcS4goXrDDKFgcnLDDIFgd7zNDLFgfvTUHnL23ISJuV7iS3Ooarn1VxkeeUvkDSV2b6J3FQT+pDW8Jb4vRD4Kqe1Kf/Ev4mTj32PhQ6b+9pPT+XHgysHrPM6QAAAABJRU5ErkJggg=="
            />
          </span>{" "}
        </div>
      )}
      <video
        className={styles.item}
        // autoPlay={true}
      >
        <source src={src} type="video/mp4" />
      </video>
    </div>
  );
};

export default function Home() {
  const [isplaying, setisplaying] = useState(false);

  function togglePlay(e: MouseEvent<HTMLVideoElement>) {
    const target = e.target as HTMLVideoElement;
    // console.log(target.play())
    setisplaying((prev) => !prev);
    target.play();
    if (isplaying === true) {
      target.pause();
    }
  }
  useEffect(() => {
    // let videos = document.getElementsByClassName(
    //   "item"
    // ) as HTMLCollectionOf<HTMLDivElement>;
    // Array.from(videos).forEach((item) => {
    //   console.log(item);
    // });
    let videos = document.getElementsByTagName("video") as HTMLCollectionOf<HTMLVideoElement>
    Array.from(videos).forEach((item) => console.log(item));
  }, [])
  

  return (
    <>
      <Head>
        <title>Tiktok</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main
        className={styles.main}
        onClick={togglePlay}
      >
        <Video src={"1.mp4"} isplaying={isplaying} />
        <Video src={"2.mp4"} isplaying={isplaying} />
        <Video src={"3.mp4"} isplaying={isplaying} />
        <Video src={"4.mp4"} isplaying={isplaying} />      
      </main>
    </>
  );
}
